## Что такое биткойн-майнинг?
Вам не нужно понимать, как работает майнинг биткойнов, чтобы использовать биткойны, но если вас интересуют детали, чем занимаются майнеры и как возникает биткойн, читайте дальше.

### Майнинг простыми словами
Представьте, что вы хотите заполнить музей произведениями искусства из головоломок, каждая из которых будет способствовать впечатлениям посетителей. Есть четкие правила: в музей можно помещать только правильно собранные и выигранные в конкурсе пазлы. Вы выберете и дадите награду тому ребенку, который первым решит самую сложную головоломку. Вы же не хотите, чтобы ребенок мог обманывать других или заранее знать, какая головоломка победит. Теперь вы отправляете 10 000 детей по всему миру одну и ту же головоломку, и они начинают собирать ее по частям одновременно. Приз получает ребенок, который первым завершит сборку частей. Они доказали, что вложили в них работу, и завершенная головоломка является тому доказательством.

Процесс построения пазла не может быть нарушен, неправильные части пазла не могут быть вставлены, а выигравший ребенок не может быть выбран искусственно. Самый быстрый ребенок получает приз. Это правила. Вы можете изменить правила только в том случае, если родители, дети, разработчик головоломки и музей - все участники сети головоломки - решат сделать это коллективно. Здесь, когда мы говорим о призах, мы метафорически говорим о создании биткойнов.

Это более или менее суть Proof-of-Work. Тысячи компьютеров по всему миру одновременно решают математические загадки, демонстрируя, что они прилагают много усилий и в то же время децентрализует вознаграждение, чтобы никто не мог вступить в сговор или предсказать, какой майнер будет следующим, чтобы добавить блок к цепи. Усилия, которые майнеры прилагают для проверки транзакций и формирования блоков, не только доказывают их работу, но и обеспечивают безопасность цепочки блоков. Вы не можете изменить прошлые - исторические транзакции - в блокчейне Биткойн, не потратив много денег на инфраструктуру и электроэнергию для перезаписи блокчейна. Вот почему атаки на сеть Биткойн теоретически возможны, но на самом деле очень и очень дороги.

### Детали майнинга

Представьте, что вы уже используете биткойн и на вашем смартфоне установлен биткойн-кошелек. Вы заказываете товар в Интернете, выбирая биткойн в качестве оплаты. Сайт покажет вам свой биткойн-адрес, и вы будете использовать свой мобильный кошелек для отправки необходимой суммы. Затем происходит следующее:

Ваш кошелек подписывает транзакцию. Затем он транслируется в сеть Биткойн и попадает в пул других неподтвержденных транзакций, который называется Mempool. Получатель получает вашу транзакцию, и его полный узел подтверждает транзакцию. Однако он все еще ожидает подтверждения того, что транзакция была успешно добавлена в блок, прежде чем определять окончательность. Это момент, когда вы видите, что ваша транзакция была отправлена на ваш кошелек, но ожидает обработки, что означает, что она еще не окончательно зафиксирована в цепочке блоков. В настоящее время у вас нет подтверждений.

В то же время майнеры также получают вашу транзакцию в Mempool своей ноды. Биткойн-майнер - это специализированное устройство под названием ASIC. Его единственная задача - как можно быстрее запустить алгоритм хеширования и решить загадку майнинга. Их сотни тысяч, децентрализованных по всему миру.

У майнеров также работает полное программное обеспечение узла, которое проверяет вашу транзакцию, проверяя соблюдение всех правил протокола и наличие у вас, как у плательщика, достаточного количества биткойнов для оплаты транзакции. Если ответ на эти проверки положительный, они добавляют транзакцию в свой шаблон блока. Но прежде всего, когда они генерируют новый шаблон блока, майнер вставляет так называемую транзакцию coinbase, которая, если они выиграют гонку майнинга, выплатит им 6,25 биткойна в качестве награды. После создания транзакции coinbase компьютеры выбирают транзакции из Mempool и добавляют их в ранее созданный шаблон блока.

В то же время хэширующие компьютеры (ASIC) начинают решать математическую головоломку. Они конкурируют со всеми другими майнинговыми компьютерами по всему миру. Хешер, который решает головоломку, сначала передает блок своим одноранговым узлам, которые проверяют его и ретранслируют своим одноранговым узлам, и так далее, пока каждый узел в сети не проверит и не сохранит блок. После того, как в блокчейн добавлено еще 99 блоков, майнер-победитель может потратить ранее созданную субсидию в размере 6,25 биткойна.

Получатель, фактически, их полный узел, получает блок и снова проверяет его, а затем, наконец, подтверждает вашу транзакцию. Ваш платеж теперь прикреплен к цепочке в блоке данных и завершен. Вы получаете подтверждение на свой биткойн-кошелек, что платеж был доставлен получателю. Вы видите в своем кошельке, что у вашей транзакции есть 1 подтверждение. Примерно каждые 10 минут создается новый блок, который добавляется после блока, содержащего вашу транзакцию. После шести блоков транзакция считается практически необратимой.

Период времени, в течение которого ваша транзакция должна быть оплачена, зависит от комиссии за транзакцию, которую вы выбираете и платите. Чем выше комиссия, тем быстрее майнеры вставят вашу транзакцию в блок, потому что они получают эти комиссии в дополнение к вознаграждению за блок в размере 6,25 биткойна.

К чему эта математическая головоломка? Доказательство работы требует значительных ресурсов, поскольку компьютеры требуют большого количества энергии. Этот факт приводит к критике Биткойн в свете изменений климата, которые мы, люди, создали за последние десятилетия. В главе 3.1.11 «Экологический след Биткойна» этот вопрос рассматривается более подробно.

Зачем нам нужно столько электроэнергии? Ответ - безопасность и децентрализация. Необходимость прилагать усилия и энергию для майнинга защищает данные в блокчейне от манипуляций и делает их неизменными и не подвергающимися цензуре. Ни государство, ни организация не могут изменить блокчейн.

С момента своего создания в 2009 году блокчейн Биткойн ни разу не был взломан. На данный момент создано около 18,74 миллиона биткойнов на сумму более шестисот миллиардов долларов США (июнь 2021 года). Хотя успешный взлом сети Биткойн вызовет беспокойство и подорвет доверие, для этого потребуется сосредоточить не менее 51% мощности майнинга Биткойн у одного владельца или конгломерата. Это может позволить злоумышленнику генерировать новые блоки быстрее, чем остальные 49% майнеров, что означает, что они теоретически могут переопределить консенсус. Но такая атака не может украсть, перенаправить или потратить биткойны без подписей. Злоумышленники могли только попытаться дважды потратить свои собственные биткойны на самые последние блоки и вызвать сбои из-за отказа в обслуживании при создании будущих блоков.

Кроме того, если атака на Биткойн когда-либо увенчается успехом, то цепочка биткойнов разделится, как это происходило несколько раз раньше. Участники блокчейна Биткойн могут переключиться на поддержку «новой» цепочки или продолжить поддержку «старой» версии цепочки. Такое разделение версий из-за внутренних правил известно как хард-форк. Хард-форк Bitcoin / Bitcoin Cash 2017 года доказал, что это не нанесет ущерба легитимности блокчейна.

Вторая важная функция майнинга - обеспечение децентрализации. С одной стороны, сделать создание денег независимым от центральных органов и захвата власти людьми, таких как центральные банки, а с другой стороны, чтобы гарантировать, что ни один майнер не сможет получить преимущество и манипулировать блокчейном. Расчетная задача сложна, и в то же время, как и при розыгрыше лотереи, вопрос удачи - какой компьютер первым найдет верное решение. В результате невозможно предсказать, кто выиграет компьютер, что делает невозможным влияние на блокчейн. Если вы не знаете, кто будет первым, вы не сможете манипулировать им и получить награду.

Если вы думаете о том, чтобы начать использовать биткойн, будьте уверены, что блокчейн защищен майнингом и распределяется одинаково на тысячах разных компьютеров. Это очень и очень безопасно. Ваша самая важная задача - самостоятельно хранить биткойны и хранить секретные ключи (ваш пароль) в безопасности.
